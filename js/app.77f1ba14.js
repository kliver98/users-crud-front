(function(e){function t(t){for(var r,s,c=t[0],i=t[1],l=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/users-crud-front/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o={id:"app"};function a(e,t,n,a,s,c){var i=Object(r["k"])("Navbar"),l=Object(r["k"])("User"),u=Object(r["k"])("router-view");return Object(r["g"])(),Object(r["c"])("div",o,[Object(r["f"])(i),Object(r["f"])(l),Object(r["f"])(u)])}var s=Object(r["q"])("data-v-64c009b8");Object(r["i"])("data-v-64c009b8");var c={class:"container mt-4",style:{"background-color":"#FAFAFA"}},i={class:"display-4 text-center"},l={class:"row"},u={class:"col-lg-8 offset-lg-2"},d={class:"card mt-4"},p={class:"card-body"},f={class:"input-group col-lg-12"},b={class:"input-group-append"},m=Object(r["f"])("br",null,null,-1),h={class:"alert alert-secondary text-center",role:"alert"},g={class:"list-group"},v={class:"list-group-item d-flex justify-content-between text-white bg-dark"},j=Object(r["f"])("span",null," Documento ",-1),O=Object(r["f"])("span",null," Nombre de usuario ",-1),y=Object(r["f"])("br",null,null,-1),w={class:"text-danger cursor"};Object(r["h"])();var I=s((function(e,t,n,o,a,s){var I=Object(r["k"])("Form");return Object(r["g"])(),Object(r["c"])("div",c,[Object(r["p"])(Object(r["f"])("div",null,[Object(r["f"])(I,{user:a.user,editing:a.editing},null,8,["user","editing"])],512),[[r["n"],a.showForm]]),Object(r["p"])(Object(r["f"])("h1",i,"Listado de Usuarios",512),[[r["n"],!a.showForm]]),Object(r["p"])(Object(r["f"])("hr",null,null,512),[[r["n"],!a.showForm]]),Object(r["p"])(Object(r["f"])("div",l,[Object(r["f"])("div",u,[Object(r["f"])("div",d,[Object(r["f"])("div",p,[Object(r["f"])("div",f,[Object(r["p"])(Object(r["f"])("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.docId=e}),class:"form-control form-control-lg",placeholder:"Buscar usuario por documento"},null,512),[[r["m"],a.docId]]),Object(r["f"])("div",b,[Object(r["f"])("button",{class:"btn btn-success btn-lg",onClick:t[2]||(t[2]=function(e){return s.filterUsers()})},"Buscar")]),Object(r["f"])("button",{type:"button",class:"btn btn-primary ml-3 pl-3 pr-3",onClick:t[3]||(t[3]=function(e){return s.createUser()})},"Crear")]),m,Object(r["p"])(Object(r["f"])("div",h," No hay datos para mostrar ",512),[[r["n"],0===a.listUsers.length]]),Object(r["p"])(Object(r["f"])("ul",g,[Object(r["f"])("li",v,[j,O,Object(r["f"])("span",{class:"cursor",onClick:t[4]||(t[4]=function(e){return s.deleteAll()})}," Eliminar ")]),y,(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(a.listUsers,(function(e,t){return Object(r["g"])(),Object(r["c"])("li",{key:t,class:"list-group-item d-flex justify-content-between","data-testid":e._id},[Object(r["f"])("span",{onClick:function(t){return s.showMore(e._id)},class:"cursor"},Object(r["l"])(e._id),9,["onClick"]),Object(r["f"])("span",{onClick:function(t){return s.showMore(e._id)},class:"cursor"},Object(r["l"])(e.username),9,["onClick"]),Object(r["f"])("span",w,[Object(r["f"])("i",{class:"fas fa-trash-alt",onClick:function(n){return s.deleteUser(e._id,t)}},null,8,["onClick"])])],8,["data-testid"])})),128))],512),[[r["n"],a.listUsers.length>0]])])])])],512),[[r["n"],!a.showForm]])])})),k=(n("4160"),n("a434"),n("a9e3"),n("8ba4"),n("159b"),n("bc3a")),U=n.n(k),C="https://users-crud-user.herokuapp.com/api/latest/",x={create:function(e){return U()({method:"POST",baseURL:C,url:"users",data:e})},list:function(){return U()({method:"GET",baseURL:C,url:"users"})},delete:function(e){return U()({method:"DELETE",baseURL:C,url:"users/".concat(e)})},getUser:function(e){return U()({method:"GET",baseURL:C,url:"users/".concat(e)})},updateUser:function(e,t){return U()({method:"PUT",baseURL:C,url:"users/".concat(e),data:t})}},_={class:"mt-4"},E=Object(r["f"])("h1",{class:"display-4 text-center"},"Cuenta de usuario",-1),F=Object(r["f"])("hr",null,null,-1),B=Object(r["f"])("div",{id:"error"},null,-1),L={class:"text-center",style:{"padding-left":"15%","padding-right":"15%"}},N=Object(r["d"])('<div class="form-group"><label for="exampleFormControlInput1"><span class="text-danger">*</span> Nombre(s)</label><input type="email" class="form-control" id="firstname" autocomplete="off"></div><div class="form-group"><label for="exampleFormControlInput1">Apellidos</label><input type="email" class="form-control" id="lastname" autocomplete="off"></div><div class="form-group"><label for="exampleFormControlInput1">Url foto de perfil</label><input type="email" class="form-control" id="photo" placeholder="http//www.example.com/img.png"></div>',3),P={class:"form-group"},T=Object(r["f"])("label",{for:"id_type"},[Object(r["f"])("span",{class:"text-danger"},"*"),Object(r["e"])(" Tipo de identificación")],-1),A={class:"form-control",id:"id_type"},M={class:"form-group"},S=Object(r["f"])("label",{for:"exampleFormControlInput1"},[Object(r["f"])("span",{class:"text-danger"},"*"),Object(r["e"])(" Número del documento")],-1),R=Object(r["d"])('<div class="form-group"><label for="exampleFormControlInput1"><span class="text-danger">*</span> Nombre de Usuario</label><input type="email" class="form-control" id="username" autocomplete="off"></div><div class="form-group"><label for="exampleFormControlInput1"><span class="text-danger">*</span> Contraseña</label><input type="password" class="form-control" id="password" autocomplete="off"></div><div class="form-group form-check"><input type="checkbox" class="form-check-input" checked id="active"><label class="form-check-label" for="active">¿Cuenta activa?</label></div>',3),z={class:"d-flex bd-highlight mb-3"},D=Object(r["f"])("span",{id:"action"},"Actualizar",-1),$=Object(r["f"])("span",{id:"action"},"Crear",-1);function H(e,t,n,o,a,s){return Object(r["g"])(),Object(r["c"])("div",_,[E,F,B,Object(r["f"])("form",L,[N,Object(r["f"])("div",P,[T,Object(r["f"])("select",A,[(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(a.id_type_options,(function(e){return Object(r["g"])(),Object(r["c"])("option",{value:e,key:e},Object(r["l"])(e),9,["value"])})),128))])]),Object(r["f"])("div",M,[S,Object(r["f"])("input",{type:"number",onkeydown:"return event.keyCode !== 69 && event.keyCode !== 187 && event.keyCode !== 189",disabled:s.isEditing,class:"form-control",id:"_id",placeholder:"123456789",autocomplete:"off"},null,8,["disabled"])]),R,Object(r["f"])("div",z,[Object(r["p"])(Object(r["f"])("button",{type:"button",class:"btn btn-secondary p-2 bd-highlight pl-4 pr-4",onClick:t[1]||(t[1]=function(){return s.updateUser.apply(s,arguments)})},[D],512),[[r["n"],s.isEditing]]),Object(r["p"])(Object(r["f"])("button",{type:"button",class:"btn btn-secondary p-2 bd-highlight pl-4 pr-4",onClick:t[2]||(t[2]=function(){return s.createUser.apply(s,arguments)})},[$],512),[[r["n"],!s.isEditing]]),Object(r["f"])("button",{type:"button",class:"btn btn-danger ml-auto p-2 bd-highlight pl-3 pr-3",onClick:t[3]||(t[3]=function(){return s.closeForm.apply(s,arguments)})},"Cancelar")])])])}n("c740"),n("4d63"),n("ac1f"),n("25f0");var q={data:function(){return{id_type_options:["CI - CedulaIdentidad","CC - CedulaCiudadania","TI - TarjetaIdentidad","TP - TarjetaPasaporte","RC - RegistroCivil","CE - CedulaExtranjeria","CI - CarneIdentidad","DNI - DocumentoNacionalIdentidad","DUI - DocumentoUnicoIdentidad","ID"],baseAPIuser:"https://users-crud-user.herokuapp.com/api/latest/",baseAPIauth:"https://users-crud-authentication.herokuapp.com/api/latest/"}},computed:{isEditing:function(){return this.$parent.editing}},props:["user","editing"],watch:{user:function(){var e=this.$parent.user;this.setField(e.id_type,e._id,e.lastname,e.firstname,e.username,e.password,e.photo,e.active)}},methods:{closeForm:function(){this.setField(),this.$parent.getUsers(),this.$parent.switchForm(),this.$parent.editing=!1},validateUrl:function(){var e=document.getElementById("photo").value;if(""!=e){var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return!!t.test(e)}return!0},createFormUser:function(){var e=document.getElementById("id_type"),t=e.options[e.selectedIndex].value,n=document.getElementById("_id").value,r=document.getElementById("lastname").value,o=document.getElementById("firstname").value,a=document.getElementById("username").value,s=document.getElementById("password").value,c=document.getElementById("photo").value,i=document.getElementById("active").checked;return{_id:n,id_type:t,lastname:r,firstname:o,username:a,password:s,photo:c,active:i}},createUser:function(){var e=this,t=this.createFormUser();if(this.fieldsCorrect(t))if(this.validateUrl()){if(this.$parent.editing&&this.$parent.user._id!==parseInt(t._id))return void alert("No se puede cambiar la cedula, debe contactarse con el administrador");x.create(t).then((function(t){201===t.status&&(alert("Usuario creado exitosamente"),e.closeForm(),e.setField())})).catch((function(e){alert("A ocurrido un error, verifica la información.",e)}))}else this.showMessage('<div class="p-3 mb-2 bg-danger text-white text-center rounded">Revisa la url ingresada <b>*</b> Debe ser valida</div>');else this.showMessage('<div class="p-3 mb-2 bg-danger text-white text-center rounded">Revisa los campos de nuevo, los que tienen <b>*</b> son obligatorios</div>')},updateUser:function(){var e=this,t=this.createFormUser();x.updateUser(t._id,t).then((function(t){200===t.status&&(alert("Usuario actualizado exitosamente"),e.closeForm(),e.setField())})).catch((function(e){e.response&&alert(e.response.data)}))},showMessage:function(e){document.getElementById("error").innerHTML=e,window.scroll({top:0,left:0,behavior:"smooth"}),setTimeout((function(){document.getElementById("error").innerHTML=""}),3200)},fieldsCorrect:function(e){return!(!this.isNumber(e._id)||e._id.length<6||""===e.firstname||""===e.username||""===e.password)},isNumber:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!1===Number.isInteger(parseInt(n)))return!1}return!0},setField:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];""===e?e=0:(e=this.id_type_options.findIndex((function(t){return t===e})),e<0&&(e=0)),document.getElementById("id_type").selectedIndex=e,document.getElementById("_id").value=t,document.getElementById("lastname").value=n,document.getElementById("firstname").value=r,document.getElementById("username").value=o,document.getElementById("password").value=a,document.getElementById("photo").value=s,document.getElementById("active").checked=c}}};q.render=H;var G=q,J={name:"Usuario",components:{Form:G},data:function(){return{baseAPIuser:"https://users-crud-user.herokuapp.com/api/latest/",baseAPIauth:"https://users-crud-authentication.herokuapp.com/api/latest/",docId:"",showForm:!1,listUsers:[],user:void 0,editing:!1}},methods:{filterUsers:function(){var e=this,t=this.isNumber(this.docId);if(""===this.docId||!t)return t||alert("Solo se acepta números"),void(this.docId="");x.getUser(this.docId).then((function(t){""!==t.data?e.showMore(t.data._id):alert("No se encontro ningún usuario")})).catch((function(e){alert("No se ha podido conectar a la base de datos",e)}))},isNumber:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!1===Number.isInteger(parseInt(n)))return!1}return!0},createUser:function(){this.user={},this.switchForm()},switchForm:function(){this.showForm=!this.showForm},deleteUser:function(e,t){var n=this;x.delete(e).then((function(){n.listUsers.splice(t,1)}))},deleteAll:function(){var e=this,t=window.confirm("¿Desea eliminar todos los usuarios?");t&&(this.listUsers.forEach((function(t){e.deleteUser(t._id,0)})),alert("Se han eliminado todos los usuarios"))},getUsers:function(){var e=this;x.list().then((function(t){e.listUsers=t.data})).catch((function(e){alert("No se ha podido conectar a la base de datos",e)}))},showMore:function(e){var t=this;x.getUser(e).then((function(e){t.user=e.data,t.editing=!0,t.switchForm()})).catch((function(e){alert("No se ha podido conectar a la base de datos",e)}))}},created:function(){this.getUsers()}};n("7910");J.render=I,J.__scopeId="data-v-64c009b8";var V=J,K=Object(r["f"])("span",{id:"btnLogin"},"Iniciar sesion",-1),Q={class:"mt-4"},W=Object(r["f"])("h1",{class:"display-4 text-center"},"Iniciar sesion",-1),X=Object(r["f"])("hr",null,null,-1),Y=Object(r["f"])("div",{id:"error"},null,-1),Z={class:"text-center",style:{"padding-left":"15%","padding-right":"15%"}},ee=Object(r["d"])('<div class="form-group"><label for="exampleFormControlInput1"><span class="text-danger">*</span> Nombre de Usuario</label><input type="email" class="form-control" id="usernameLogin" autocomplete="off"></div><div class="form-group"><label for="exampleFormControlInput1"><span class="text-danger">*</span> Contraseña</label><input type="password" class="form-control" id="passwordLogin" autocomplete="off"></div>',2),te={class:"d-flex bd-highlight mb-3"},ne=Object(r["f"])("span",{id:"action"},"login",-1);function re(e,t,n,o,a,s){var c=Object(r["k"])("b-navbar-toggle"),i=Object(r["k"])("b-button"),l=Object(r["k"])("b-nav-form"),u=Object(r["k"])("b-navbar-nav"),d=Object(r["k"])("b-collapse"),p=Object(r["k"])("b-navbar");return Object(r["g"])(),Object(r["c"])("div",null,[Object(r["p"])(Object(r["f"])("div",null,[Object(r["f"])("div",null,[Object(r["f"])(p,{toggleable:"lg",type:"dark",variant:"info"},{default:Object(r["o"])((function(){return[Object(r["f"])(c,{target:"nav-collapse"}),Object(r["f"])(d,{id:"nav-collapse","is-nav":""},{default:Object(r["o"])((function(){return[Object(r["f"])(u,{class:"ml-auto"},{default:Object(r["o"])((function(){return[Object(r["f"])(l,null,{default:Object(r["o"])((function(){return[Object(r["f"])(i,{class:"btn btn-success float-right",type:"submit",onClick:t[1]||(t[1]=function(e){return s.loginShow()})},{default:Object(r["o"])((function(){return[K]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})])],512),[[r["n"],a.showLogin]]),Object(r["p"])(Object(r["f"])("div",null,[Object(r["f"])("div",Q,[W,X,Y,Object(r["f"])("form",Z,[ee,Object(r["f"])("div",te,[Object(r["f"])("button",{type:"button",class:"btn btn-secondary p-2 bd-highlight pl-4 pr-4",onClick:t[2]||(t[2]=function(){return s.login.apply(s,arguments)})},[ne]),Object(r["f"])("button",{type:"button",class:"btn btn-danger ml-auto p-2 bd-highlight pl-3 pr-3",onClick:t[3]||(t[3]=function(){return s.cancelLogin.apply(s,arguments)})}," Cancelar ")])])])],512),[[r["n"],!a.showLogin]])])}var oe="https://users-crud-authentication.herokuapp.com/api/latest/",ae={authenticate:function(e){return U()({method:"POST",baseURL:oe,url:"users/auth/",data:e})}},se={components:{},data:function(){return{baseAPIauth:"https://users-crud-authentication.herokuapp.com/api/latest/",showLogin:!0}},methods:{loginShow:function(){this.showLogin=!this.showLogin},login:function(){var e=this,t=document.getElementById("usernameLogin").value,n=document.getElementById("passwordLogin").value,r={username:t,password:n};ae.authenticate(r).then((function(t){console.log(t.data),e.loginShow(),document.getElementById("btnLogin").innerHTML="Bienvenido "+t.data.username})).catch((function(e){alert("Ha ocurrido un error, verifica la información.",e)}))},cancelLogin:function(){this.loginShow()}}};se.render=re;var ce=se,ie={name:"App",components:{User:V,Navbar:ce}};ie.render=a;var le=ie;Object(r["b"])(le).mount("#app")},7910:function(e,t,n){"use strict";n("c402")},c402:function(e,t,n){}});
//# sourceMappingURL=app.77f1ba14.js.map